# Research Agent 项目工程计划

## 1. 项目概述

本项目旨在参与阿里云"用PAI-LangStudio实现Research Agent"竞赛（赛题ID: 532449），目标是构建一个基于Qwen系列模型、能够自主规划任务、调用外部工具并整合多源证据的智能体，在GAIA基准测试上取得前10名的成绩。

**竞赛链接**: https://tianchi.aliyun.com/competition/entrance/532449/customize818

**核心要求**:
- 必须使用PAI-LangStudio平台开发
- 必须使用Qwen系列基础模型（禁止微调）
- 可以自由使用搜索引擎和工具
- 第一阶段：40道公开验证集问题
- 第二阶段：20道非公开测试集问题
- 评分标准：基于正确率的排名

## 2. 阶段性目标与时间线

### 阶段一：分析与设计 (Week 1-2)

**截止日期**: 根据竞赛时间表确定

**核心任务**:
- [ ] **深入理解赛题规则**
  - [ ] 详细阅读并标记所有"禁止"与"必须"项
  - [ ] 明确技术红线清单（禁止微调、必须使用Qwen、允许的工具等）
  - [ ] 理解GAIA基准的题目类型和特点
  - [ ] 研究往届优秀方案（如有）

- [ ] **技术方案设计**
  - [ ] 完成《技术设计文档》初稿
  - [ ] 确定Agent架构（ReAct/Plan-and-Execute等）
  - [ ] 设计工具链集成方案
  - [ ] 设计答案归一化流程

- [ ] **环境准备**
  - [ ] 开通阿里云PAI-DSW和PAI-EAS免费试用
  - [ ] 登录PAI-LangStudio控制台
  - [ ] 熟悉平台操作和工作流模式
  - [ ] 准备开发环境

**交付物**:
- ✅ 技术设计文档（TECHNICAL_DESIGN.md）
- ✅ 项目规范文档（SPECIFICATION.md）
- ✅ 技术红线清单

### 阶段二：基础实现 (Week 3-5)

**核心任务**:
- [ ] **平台环境搭建**
  - [ ] 在PAI-LangStudio中创建新项目
  - [ ] 配置Qwen模型节点
  - [ ] 配置HTTP输入/输出节点

- [ ] **核心Agent工作流实现**
  - [ ] 实现ReAct引擎（Python节点）
  - [ ] 集成搜索工具（SerpAPI或阿里云IQS）
  - [ ] 实现基础版提示词工程
  - [ ] 实现答案归一化处理器

- [ ] **初步测试**
  - [ ] 在5-10道样例题上完成测试
  - [ ] 验证工作流能正常运行
  - [ ] 记录初步正确率基线

**交付物**:
- ✅ 可运行的LangStudio应用流
- ✅ 基础版Agent服务
- ✅ 测试报告

### 阶段三：优化与迭代 (Week 6-9)

**核心任务**:
- [ ] **全量验证集测试**
  - [ ] 在40道验证集上完成第一轮测试
  - [ ] 记录每题的详细日志
  - [ ] 计算整体正确率

- [ ] **错误分析与分类**
  - [ ] 分析失败案例，分类错误原因：
    - 规划错误（任务理解/分解不当）
    - 工具使用不当（搜索词不准确/工具选择错误）
    - 答案格式问题（未归一化/格式不匹配）
    - 模型推理错误

- [ ] **针对性优化**
  - [ ] 优化提示词（改进ReAct模板）
  - [ ] 优化工具调用策略（何时搜索、如何搜索）
  - [ ] 改进答案归一化函数
  - [ ] 增加错误处理和重试机制

- [ ] **迭代优化**
  - [ ] 进行至少3轮迭代优化
  - [ ] 每次迭代后重新测试验证集
  - [ ] 记录每次改进的效果
  - [ ] 直至验证集正确率趋于稳定

- [ ] **第一阶段提交**
  - [ ] 生成`validation_answers.jsonl`文件
  - [ ] 验证文件格式正确性
  - [ ] 提交第一阶段答案

**交付物**:
- ✅ 优化后的提示词与工具链
- ✅ 验证集上的高正确率结果
- ✅ `validation_answers.jsonl`文件
- ✅ 优化报告

### 阶段四：部署与最终提交 (Week 10-11)

**核心任务**:
- [ ] **服务部署**
  - [ ] 将最终版LangStudio应用流部署至PAI-EAS
  - [ ] 获取EAS服务的Endpoint和Token
  - [ ] 验证服务稳定性和可用性

- [ ] **API接口测试**
  - [ ] 严格按照赛题要求测试EAS服务API
  - [ ] 验证请求格式（POST、Bearer Token鉴权）
  - [ ] 验证响应格式（JSON格式，包含answer字段）
  - [ ] 测试流式和非流式响应

- [ ] **项目打包**
  - [ ] 从LangStudio导出项目ZIP包
  - [ ] 验证ZIP包完整性
  - [ ] 确保包含所有必要文件

- [ ] **文档完善**
  - [ ] 完善README.md（包含复现步骤）
  - [ ] 完善技术设计文档
  - [ ] 完善项目规范文档
  - [ ] 添加API调用示例

- [ ] **最终验证**
  - [ ] 使用ZIP包在全新环境中复现应用流
  - [ ] 验证复现流程的完整性
  - [ ] 进行合规性自查（见SPECIFICATION.md）

- [ ] **最终提交**
  - [ ] 提交EAS服务信息（Endpoint、Token）
  - [ ] 提交项目ZIP包
  - [ ] 提交所有文档

**交付物**:
- ✅ 稳定部署的EAS服务
- ✅ 完整的项目交付包（ZIP）
- ✅ 完整的项目文档
- ✅ 复现验证报告

## 3. 资源与依赖

### 3.1 平台资源
- **PAI-LangStudio**: 阿里云机器学习平台，用于开发Agent工作流
- **PAI-EAS**: 用于部署和运行Agent服务
- **PAI-DSW**: 用于开发和调试（可选）

### 3.2 模型资源
- **Qwen系列模型**: 通过PAI Model Gallery或阿里云百炼获取
  - 推荐：qwen-max（性能最强）
  - 备选：qwen-plus、qwen-turbo

### 3.3 工具资源
- **搜索引擎**: 
  - SerpAPI（推荐，功能强大）
  - 阿里云IQS（备选）
- **其他工具**（根据题目需要）:
  - 计算器工具
  - 日期计算工具
  - 单位换算工具

### 3.4 关键文档链接
- 赛题页面: https://tianchi.aliyun.com/competition/entrance/532449/customize818
- PAI-LangStudio文档: [阿里云文档中心]
- PAI-EAS部署文档: [阿里云文档中心]
- GAIA基准说明: [相关文档]

## 4. 交付物检查清单

### 4.1 第一阶段提交前检查
- [ ] `validation_answers.jsonl`文件格式正确
  - [ ] 每行一个JSON对象
  - [ ] 包含`question_id`和`answer`字段
  - [ ] 答案已通过归一化函数处理
- [ ] 答案文件已本地验证（格式、编码等）
- [ ] 已记录提交时间，确保在截止日期前

### 4.2 第二阶段提交前检查
- [ ] **EAS服务信息**
  - [ ] Endpoint URL有效且可访问
  - [ ] Token有效且权限正确
  - [ ] 服务稳定运行，响应正常

- [ ] **API接口规范**
  - [ ] 支持POST方法
  - [ ] 支持Bearer Token鉴权
  - [ ] 请求体格式：`{"question": "..."}`
  - [ ] 响应格式：`{"answer": "..."}`
  - [ ] 支持流式响应（如要求）

- [ ] **项目ZIP包**
  - [ ] 从LangStudio正确导出
  - [ ] 包含完整的工作流配置
  - [ ] 包含所有必要的代码和配置
  - [ ] 文件大小符合要求

- [ ] **项目文档**
  - [ ] README.md完整且清晰
  - [ ] 包含完整的复现步骤
  - [ ] 包含API调用示例
  - [ ] TECHNICAL_DESIGN.md完整
  - [ ] SPECIFICATION.md完整

- [ ] **复现验证**
  - [ ] 已使用ZIP包在全新环境成功复现
  - [ ] 复现流程文档化
  - [ ] 验证结果记录

- [ ] **合规性自查**
  - [ ] 无硬编码答案
  - [ ] 仅使用允许的模型（Qwen系列）
  - [ ] 无模型微调行为
  - [ ] 完全符合赛题要求

## 5. 风险管理

### 5.1 技术风险
- **风险**: 平台操作不熟悉，开发效率低
- **应对**: 提前熟悉平台，准备详细的操作文档

- **风险**: 工具调用失败或结果不准确
- **应对**: 实现完善的错误处理和重试机制，准备多个工具备选

### 5.2 时间风险
- **风险**: 优化迭代时间不足
- **应对**: 设置明确的里程碑，及时调整计划，优先核心功能

### 5.3 合规风险
- **风险**: 违反赛题规则导致成绩无效
- **应对**: 建立合规性自查清单，每次提交前严格检查

### 5.4 部署风险
- **风险**: EAS服务部署失败或不稳定
- **应对**: 提前测试部署流程，准备备选方案

## 6. 关键里程碑

| 里程碑 | 时间节点 | 关键产出 |
|--------|---------|---------|
| M1: 完成技术设计 | Week 2 | 技术设计文档 |
| M2: 完成基础实现 | Week 5 | 可运行的工作流 |
| M3: 验证集测试通过 | Week 8 | 验证集答案文件 |
| M4: 服务部署完成 | Week 10 | EAS服务 |
| M5: 最终提交完成 | Week 11 | 所有交付物 |

## 7. 每周进度跟踪

### Week 1-2: 分析与设计
- [ ] 完成赛题分析
- [ ] 完成技术设计
- [ ] 完成环境准备

### Week 3-5: 基础实现
- [ ] 完成工作流搭建
- [ ] 完成核心功能实现
- [ ] 完成初步测试

### Week 6-9: 优化迭代
- [ ] 完成验证集测试
- [ ] 完成错误分析
- [ ] 完成优化迭代
- [ ] 提交第一阶段答案

### Week 10-11: 部署提交
- [ ] 完成服务部署
- [ ] 完成文档完善
- [ ] 完成最终提交

## 8. 成功标准

### 阶段一成功标准
- ✅ 技术方案清晰可行
- ✅ 环境准备就绪
- ✅ 文档完整

### 阶段二成功标准
- ✅ 工作流能正常运行
- ✅ 基础功能实现
- ✅ 样例题测试通过

### 阶段三成功标准
- ✅ 验证集正确率 > 70%（目标：> 80%）
- ✅ 错误分析完整
- ✅ 优化效果明显

### 阶段四成功标准
- ✅ EAS服务稳定运行
- ✅ 项目可完整复现
- ✅ 所有交付物完整
- ✅ 最终排名进入前10名

## 9. 联系方式与支持

- **赛题支持**: 通过天池平台论坛
- **技术问题**: 参考阿里云文档中心
- **项目问题**: 记录在项目Issue中

---

**最后更新**: 2026-01-28
**项目状态**: 进行中
